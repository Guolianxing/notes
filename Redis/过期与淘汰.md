### 过期与淘汰
#### 一. 过期
Redis key过期有两种方式：被动和主动方式：    
当一些客户端尝试访问它时，key会被发现并主动的过期。    
当然，这样是不够的，因为有些过期的key，永远不会访问他们。 无论如何，这些key应该过期，所以定时随机测试设置key的过期时间。所有这些过期的key将会从密钥空间删除。     
具体就是Redis每秒10次做的事情：    
1. 测试随机的20个key进行相关过期检测
2. 删除所有已经过期的key
3. 如果有多于25%的key过期，重复步骤1
#### 二. 淘汰
* `maxmemory`配置指令用于配置Redis存储数据时指定限制的内存大小，设置为0代表没有内存限制，对于64位系统这是个默认值，对于32位的系统默认内存限制为3GB.
* 当`maxmemory`限制达到的时候，Redis会使用的行为右`maxmemory-policy`配置指令来配置，以下的策略是可用的：
    1. `noeviction`：当内存达到限制并且客户端尝试执行会让更多内存被使用的指令时，返回错误(大部分的写入指令，但DEL和几个例外)
    2. `allkeys-lru`：尝试回收使用最少的键(LRU)，使得新添加的数据有空间存放
    3. `volatile-lru`：尝试回收使用最少的键(LRU)，但仅限于在过期集合的键，使得新添加的数据有空间存放
    4. `allkeys-random`：回收随机的键使得新添加的数据有空间存放
    5. `volatile-random`：回收随机的键使得新添加的数据有空间存放，但仅限于在过期集合的键
    6. `volatile-ttl`：回收在过期集合的键，并且有限回收存活时间(TTL)较短的键，使得新添加的数据有空间存放